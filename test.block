/* BLOCK DEMO: using only your builtins */

echo("=== BASIC TYPES ===")

name = "Abubakar"
age = 19
skills = ["python", "js", "block"]

echo("name type: " + typeOf(name))
echo("age type: " + typeOf(age))
echo("skills type: " + typeOf(skills))


/* --- LIST OPERATIONS --- */

echo("=== LISTS ===")

nums = [1, 2, 3]
echo("nums: " + toStr(nums))

listAppend(nums, 10)
echo("after append: " + toStr(nums))

p = listPop(nums)
echo("popped: " + toStr(p))
echo("after pop: " + toStr(nums))

listExtend(nums, [5, 6, 7])
echo("after extend: " + toStr(nums))


/* --- SET OPERATIONS --- */

echo("=== SETS ===")

s = {1, 2, 3}
setAdd(s, 9)
setRemove(s, 2)
echo("set: " + toStr(s))


/* --- MAP OPERATIONS --- */

echo("=== MAPS ===")

user = [
    "name": name,
    "age": age,
    "skills": skills
]

echo("user: " + toStr(user))

mapSet(user, "age", 20)
echo("updated user age: " + toStr(mapGet(user, "age", none)))

echo("keys: " + toStr(mapKeys(user)))
echo("values: " + toStr(mapValues(user)))


/* --- STRING OPERATIONS --- */

echo("=== STRINGS ===")

text = "hello Block Language"
echo(strToUpper(text))
echo(strToLower(text))
echo(strReplace(text, "Block", "Custom"))
echo("split: " + toStr(strSplit(text, " ")))
echo("count 'l': " + toStr(strCount(text, "l")))


/* --- NUMBER OPERATIONS --- */

echo("=== NUMBERS ===")

echo("abs(-5) = " + toStr(numAbs(-5)))
echo("round(3.1416, 2) = " + toStr(numRound(3.1416, 2)))
echo("floor(5.8) = " + toStr(numFloor(5.8)))
echo("ceil(5.1) = " + toStr(numCeil(5.1)))
echo("sqrt(16) = " + toStr(numSqrt(16)))
echo("cbrt(27) = " + toStr(numCbrt(27)))
echo("sign(-10) = " + toStr(numSign(-10)))


/* --- COLLECTION UTILITIES --- */

echo("=== COLLECTION UTILITIES ===")

chars = "abcdefg"

onlyVowels = colFilter(chars, fn(c): c == "a" or c == "e")
echo("vowels from 'abcdefg': " + toStr(onlyVowels))

upperList = colApplyF(["a", "b", "c"], strToUpper)
echo("apply uppercase: " + toStr(upperList))

echo("contains 'c': " + toStr(colContains(chars, "c")))

joined = colJoin(["x", "y", "z"], "-")
echo("joined: " + joined)


/* --- FILE I/O --- */

echo("=== FILE I/O ===")

file = fOpen("block_demo.txt", "w")
fWrite(file, "Hello from BLOCK!\n")
fWrite(file, "This file was written using builtins.\n")
fClose(file)

file2 = fOpen("block_demo.txt", "r")
content = fRead(file2)
fClose(file2)

echo("file content:")
echo(content)


/* --- UNICODE --- */

echo("=== UNICODE ===")

echo("ucp('A') = " + toStr(ucp("A")))
echo("char(66) = " + char(66))


/* --- EXIT --- */

echo("Done.")
exit()
